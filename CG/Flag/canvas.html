<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        canvas {
            border: 1px solid #000;
            display: Block;
            border: 1px rgb(255, 0, 0) solid;
            background-color: white;

        }
        body {
        background-color: gray;
    }
    </style>
    <title>Georgia Flag</title>
</head>

<body>
    <center><canvas id="georgiaFlag" width="600" height="400"></canvas></center>

    <script>
        const canvas = document.getElementById('georgiaFlag');
        const ctx = canvas.getContext('2d', {
            willReadFrequently: true
        });
        let width = canvas.width;
        let height = canvas.height;
        // Bresenham line drawing algorithm
        function drawLine(ctx, x1, y1, x2, y2, color) {
            let dx = Math.abs(x2 - x1);
            let dy = Math.abs(y2 - y1);
            let sx = (x1 < x2) ? 1 : -1;
            let sy = (y1 < y2) ? 1 : -1;
            let err = dx - dy;

            while (true) {
                ctx.fillStyle = color;
                ctx.fillRect(x1, y1, 1, 1);
                if ((x1 === x2) && (y1 === y2)) break;
                let e2 = 2 * err;
                if (e2 > -dy) {
                    err -= dy;
                    x1 += sx;
                }
                if (e2 < dx) {
                    err += dx;
                    y1 += sy;
                }
            }
        }
        //boundary Fill Algorithm
        async function boundaryFill(x, y, fill_color, boundary_color) {
            let stack = [
                [x, y]
            ];


            while (stack.length) {
                let [x, y] = stack.pop();
                let pixelData = ctx.getImageData(x, y, 1, 1).data;
                let currentColor = `rgb(${pixelData[0]}, ${pixelData[1]}, ${pixelData[2]})`;
                console.log(currentColor)
                if (currentColor !== boundary_color && currentColor !== fill_color) {
                    ctx.fillStyle = fill_color;
                    ctx.fillRect(x, y, 1, 1);
                    // Add the neighboring pixels to the stack
                    // await delay(30);
                    stack.push([x + 1, y]);
                    stack.push([x, y + 1]);
                    stack.push([x - 1, y]);
                    stack.push([x, y - 1]);

                }
            }
        }

        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        //draw line 
        let red = 'rgb(255, 0, 0)';
        let white = 'rgb(255, 255, 255)';
        let black = 'rgb(0  , 0, 0)';
        // drawLine(ctx, 0, 0, 600, 0, black)
        drawLine(ctx, 270, 0, 330, 0, red)
        drawLine(ctx, 270, 0, 270, height, red)
        drawLine(ctx, 270, height - 1, 330, height - 1, red)
        drawLine(ctx, 330, 0, 330, height, red)
        drawLine(ctx, 0, 170, 0, 230, red)
        drawLine(ctx, 0, 170, width, 170, red)
        drawLine(ctx, 0, 230, width, 230, red)
        drawLine(ctx, width - 1, 170, width - 1, 230, red)

        //the small cross
        drawLine(ctx, 100, 35, 130, 35, red)
        drawLine(ctx, 100, 135, 130, 135, red)
        drawLine(ctx, 100, 35, 100, 135, red)
        drawLine(ctx, 130, 35, 130, 135, red)
        drawLine(ctx, 65, 70, 65, 100, red)
        drawLine(ctx, 165, 70, 165, 100, red)
        drawLine(ctx, 65, 70, 165, 70, red)
        drawLine(ctx, 65, 100, 165, 100, red)
        boundaryFill(110, 40, red, red)
        boundaryFill(120, 130, red, white)
        boundaryFill(110, 80, red, white)
        boundaryFill(80, 80, red, white)
        boundaryFill(160, 80, red, white)
        //the second quadrant
        h = 0
        w = 330
        drawLine(ctx, w + 100, h + 35, w + 130, h + 35, red)
        drawLine(ctx, w + 100, h + 135, w + 130, h + 135, red)
        drawLine(ctx, w + 100, h + 35, w + 100, h + 135, red)
        drawLine(ctx, w + 130, h + 35, w + 130, h + 135, red)
        drawLine(ctx, w + 65, h + 70, w + 65, h + 100, red)
        drawLine(ctx, w + 165, h + 70, w + 165, h + 100, red)
        drawLine(ctx, w + 65, h + 70, w + 165, h + 70, red)
        drawLine(ctx, w + 65, h + 100, w + 165, h + 100, red)
        boundaryFill(w + 110, h + 40, red, red)
        boundaryFill(w + 120, h + 130, red, white)
        boundaryFill(w + 110, h + 80, red, white)
        boundaryFill(w + 80, h + 80, red, white)
        boundaryFill(w + 160, h + 80, red, white)
        //the third quadrant
        h = 230
        w = 0
        drawLine(ctx, w + 100, h + 35, w + 130, h + 35, red)
        drawLine(ctx, w + 100, h + 135, w + 130, h + 135, red)
        drawLine(ctx, w + 100, h + 35, w + 100, h + 135, red)
        drawLine(ctx, w + 130, h + 35, w + 130, h + 135, red)
        drawLine(ctx, w + 65, h + 70, w + 65, h + 100, red)
        drawLine(ctx, w + 165, h + 70, w + 165, h + 100, red)
        drawLine(ctx, w + 65, h + 70, w + 165, h + 70, red)
        drawLine(ctx, w + 65, h + 100, w + 165, h + 100, red)
        boundaryFill(w + 110, h + 40, red, red)
        boundaryFill(w + 120, h + 130, red, white)
        boundaryFill(w + 110, h + 80, red, white)
        boundaryFill(w + 80, h + 80, red, white)
        boundaryFill(w + 160, h + 80, red, white)
        //the forth quadrant
        h = 230
        w = 330
        drawLine(ctx, w + 100, h + 35, w + 130, h + 35, red)
        drawLine(ctx, w + 100, h + 135, w + 130, h + 135, red)
        drawLine(ctx, w + 100, h + 35, w + 100, h + 135, red)
        drawLine(ctx, w + 130, h + 35, w + 130, h + 135, red)
        drawLine(ctx, w + 65, h + 70, w + 65, h + 100, red)
        drawLine(ctx, w + 165, h + 70, w + 165, h + 100, red)
        drawLine(ctx, w + 65, h + 70, w + 165, h + 70, red)
        drawLine(ctx, w + 65, h + 100, w + 165, h + 100, red)
        boundaryFill(w + 110, h + 40, red, red)
        boundaryFill(w + 120, h + 130, red, white)
        boundaryFill(w + 110, h + 80, red, white)
        boundaryFill(w + 80, h + 80, red, white)
        boundaryFill(w + 160, h + 80, red, white)
        //boundary fill
        boundaryFill(280, 10, red, red)
        boundaryFill(280, 180, red, white)
        boundaryFill(180, 180, red, white)
        boundaryFill(380, 180, red, white)
        boundaryFill(280, 240, red, white)
        boundaryFill(4+280, 10, red, red)
        boundaryFill(4+280, 180, red, white)
        boundaryFill(4+180, 180, red, white)
        boundaryFill(4+380, 180, red, white)
        boundaryFill(4+280, 240, red, white)
        boundaryFill(3+280, 10, red, red)
        boundaryFill(3+280, 180, red, white)
        boundaryFill(3+180, 180, red, white)
        boundaryFill(3+380, 180, red, white)
        boundaryFill(3+280, 240, red, white)
    </script>
</body>

</html>